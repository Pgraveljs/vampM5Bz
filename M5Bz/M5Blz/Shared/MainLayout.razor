@inherits LayoutComponentBase
@inject AppData _appData
@inject NavigationManager _navigationManager
<PageTitle>M5Blz</PageTitle>

<div class="page">
    <main>
        <article class="content px-4">
            <_CoreMenu></_CoreMenu>
            @Body
        </article>
    </main>
</div>


@code {
    protected override void OnInitialized()
    {
        _navigationManager.LocationChanged += DetectNavigation;
    }

    private void DetectNavigation(object sender, LocationChangedEventArgs e)
    {
        var path = e.Location.Remove(0, 22);

        switch (path)
        {
            case "/":
                _appData.SetNavItems(new NavItem { Href = "/", Icon = "/icons/victorian-house.png" });
                break;
            case "/Users":
                _appData.SetNavItems(new NavItem { Href = "/Users", Icon = "/icons/team-management(1).png" });
                break;
            case "/CoreRules":
                _appData.SetNavItems(new NavItem { Href = "/CoreRules", Icon = "/icons/plan-daffaires.png" });
                break;
            case "/Campaign":
                _appData.SetNavItems(new NavItem { Href = "/Campaign", Icon = "/icons/drame.png" });
                break;
        };

    }
}